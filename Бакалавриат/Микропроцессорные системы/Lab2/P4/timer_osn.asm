NAME LAB1_5    
EXTRN CODE (Delay)
MAIN SEGMENT CODE
CSEG AT 0
CALL Main
CSEG AT 001BH
JMP Timer
USING 0
; Основная программа
RSEG MAIN
Main:
CALL Delay 		; Вызов подпрограммы запуска таймера
MainCode: 			;Выполнение основной программы во время задержки
CJNE A , #00h, loop1
JMP MainCode
loop1:
JMP Main
Timer:
	DJNZ R3, resetTimer	; Уменьшаем счетчик, пока он не станет нулем	
				; Если счетчик стал нулем, то отключаем таймер
	CLR TR1		; Останавливаем таймер
	CLR IE.7	 	  ; Запрещаем прерывания
	CLR ET1		; Запрещаем прерывание от Timer 1
	CLR PT1		; Убираем наивысший приоритет прерывания от Timer 
	mov a, #05h	
	resetTimer:
RETI			; Возврат из прерывания
END




















































































































































